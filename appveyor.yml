image: Visual Studio 2022
version: 1.0.{build}
configuration: Release

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'

before_build:
- nuget restore SharpDXLab\SharpDXLab.sln

build:
  project: SharpDXLab\SharpDXLab.sln
  verbosity: minimal

after_build:
  - if "%APPVEYOR_REPO_NAME%" == "JeremyAnsel/SharpDXLab" echo %APPVEYOR_REPO_NAME%

after_test:
- git config core.safecrlf false
- git config push.default simple
- git config user.name \"Jérémy Ansel\""
- git config user.email JeremyAnsel@users.noreply.github.com
- git add -v --all images
- git commit -v -m "Update test generated by CI" || true
